const playlists = {
  "LOVE": [
    {
       
    
      title: "Ney Veyrey",
      artist: "Karthik",
      file: "Ney Veyrey.mp3",
      cover: "https://www.naasongs.to/wp-content/uploads/2023/10/Animal-2023-Ney-Veyrey.jpg",
      lyrics: `[00:00.00]
    [00:01.00]O.. Oh…
    [00:13.50]Naa dehamantha
    [00:16.00]Nee snehamtho nindindhi choode nesthama
    [00:25.00]O… naa mounamantha
    [00:28.00]Nee dyanamlo munigindi choode pranama
    [00:35.50]Naa chinnanaati gunde
    [00:37.50]Nee pere vinipisthundhe
    [00:41.50]Naa kanna ninnu mundhe
    [00:43.50]Chadivesi itu cherukundhe
    [00:48.00]Ne verey nuvu verey kadu nesthama
    [00:54.00]Nee theere poodhaare naku pranama
    [01:00.00]Ne verey nuvu verey kadu nesthama
    [01:05.05]Nee theere poodhaare naku pranama
    [01:12.05]O.. Oh…

    [01:40.00]Nee padham sprushinchake
    [01:43.50]Ne thaakane ne pedhavini
    [01:49.50]Nee dweshanni munduga kalisi
    [01:55.00]Malli choostha nee premane
    [02:02.00]Kasirinidha kanikarama
    [02:06.50]Alakalama atunaa anuraagama
    [02:11.50]Shashiraala jaadala eduraina
    [02:15.00]Marala raadha marukshanana
    [02:19.50]Vaasanthame nee chedu gnapakale
    [02:24.50]Gaayaluga marchukunta
    [02:28.00]Nuvu nuchhunna chote
    [02:30.00]Nanu nene shikshinchukunta
    [02:34.50]Ne naavai nuvu thovai kaa nesthama
    [02:40.00]Ye theeram ika dhooram kadu pranama
    [02:47.00]Ne verey nuvu verey kadu nesthama
    [02:52.50]Nee theere poodhaare naku pranama
    [02:59.00]O.. Oh… oh.. oh…



    [03:24.50]Nenemo endanaithe
    [03:26.50]Nuvvemo naa vaana ville
    [03:30.00]Ee janta unna chote
    [03:32.00]Velagalala vaana ville
    [03:36.00]Ne raathrai nuvu pagalaithe nesthama
    [03:42.05]Prathi roju ika poorthaina pranama
    [03:48.00]Ne verey nuvu verey kadu nesthama
    [03:54.05]Nee theere poodhaare naku pranama
    [04:08.00]Ne verey nuvu verey kadu nesthama
    [04:21.00]Nee theere poodhaare naku pranama`
    },
   { title: "Prema velluva",
      artist: "Sid Sriram, Nutana Mohan",
      file: "songs/Prema Velluva.mp3",
      cover: "https://m.media-amazon.com/images/I/41lwKetUrZL.jpg",
      lyrics: `[00:00.00]
[00:02.50]Dooke naapai… ivaale… prema velluva…
[00:23.00]....
[00:53.00]Pagale navaipuki nadiche kalavaa
[00:57.00]Padutoo egire Alavaa…
[01:01.50]Manase ninnu choodani okkate godava
[01:06.50]Kannule ippude chadivaa…

[01:10.50]Venta vacchaave.. vembadinchaave
[01:15.50]Oopiraalle maaraave nede neeve…
[01:21.00]Nammi teeraale.. kala kaade
[01:25.00]Peruke nennunnale praanam neede…

[01:31.00]Evarevvarani vetikinaa…
[01:37.00]Kanulaki tanu dorikeenaa…
[01:40.00]Marichaanika deninaaina…
[01:46.50]Nee valana…

[01:52.00]Telusaa tholisaarigaa manase gelichaa
[01:57.00]Yeppudu edute nilichaa…
[02:02.00]Kopam marichaanugaa idi nee mahima
[02:06.50]Nijame nuvvu naa sagamaa…

[02:13.50]Prema velluva prema uppena prema sandadi…
[02:22.00]Prema velluva prema uppena prema sandadi…

[02:38.50.00]Aato ito etainaa
[02:43.00]Aduge jarige mela mellagaa
[02:49.00]Marintha okkatokkatigaa cherenaa
[02:53.50]Manalo maname kalise vidhamaa


[02:58.00]Geetha geesale.. vechichoosale
[03:02.00]Ninnu minchi naakinkaa Thodantu dorukuna
[03:08.00]Aappalenule.. aagalenu le
[03:10.00]Choopalenule.. cheppalenule
[03:13.00]Daachalenu neneninkaa naalo prema… aa

[03:23.00]Evarevvarani vetikinaa…
[03:28.00]Kanulaki tanu dorikeenaa…
[03:33.00]Marichaanika deninaaina…
[03:38.00]Nee valana…

[03:43.00]Prema velluva prema uppena prema sandadi…
[03:53.00]Prema velluva prema uppena prema sandadi…`
    }
  ],
 
   "SAD": [
    {
      title: "Blinding Lights",
      artist: "The Weeknd",
      file: "songs/blinding.mp3",
      cover: "https://i.imgur.com/2f3ddYm.jpg",
      lyrics: `[00:00.00]
[00:05.00]I been tryna call
[00:10.00]I been on my own for long enough`
    },
    {
      title: "Shape of You",
      artist: "Ed Sheeran",
      file: "songs/shape.mp3",
      cover: "https://i.imgur.com/UpwQ3zE.jpg",
      lyrics: `[00:00.00]
[00:08.00]The club isn't the best place to find a lover
[00:15.00]So the bar is where I go`
    }
  ],

      "BASS": [
      {
      title: "Vikram Title song",
      artist: "Anirudh",
      file: "vikram.mp3",
      cover: "https://wallpaperaccess.com/full/8412315.jpg",
      lyrics: `[00:00.000]
[00:20.50]Kaalame kampinchina Marala vachchenu nayakudu
[00:32.50]Okade iddaru kadaa Ramudu mariyu rakshasudu
[00:43.50]Taramulu paade charitam veedu
[00:48.50]Kathanamu pogide kathanam veedu
[00:54.50]Palu gaayaala deham veedu Ranageyanga gelupautaadu
[01:08.50]Thakita thak dhim Thak dhim thak dhim Thakita thak dhim
[01:12.50]Thak dhim thak dhim Thakita thak dhim Thak dhim thak dhim
[01:18.50]Thakita thak dhim Thak dhim thak dhim..hahahaha..
[01:22.50]Vikram.. vikram Vikram ..vikram.. Vikram..vikram.. Vikram..vikram..
[02:07.50]Kaalame kampinchina
[02:11.50]Marala vachchenu nayakudu
[02:19.50]Okade iddaru kada 
[02:24.50]Ramudu mariyu rakshasudu
[02:30.50]Itado mananam yedalo jwalana
[02:35.50]Gatame shishira batuke samarm Shikharam tanai niliche pantam Poraadatame tana siddhantam Longadu veedu, yamudiki saitam Ika modaleddama
[02:55.50]Thakita thak dhim Thak dhim thak dhim Thakita thak dhim
[03:00.50]Thak dhim thak dhim Thakita thak dhim Thak dhim thak dhim
[03:05.50]Thakita thak dhim Thak dhim thak dhim..hahahaha..
[03:09.50]Vikram.. vikram Vikram ..vikram.. Vikram..vikram.. Vikram..vikram..`
    },
    {
      title: "Shape of You",
      artist: "Ed Sheeran",
      file: "songs/shape.mp3",
      cover: "https://i.imgur.com/UpwQ3zE.jpg",
      lyrics: `[00:00.00]
[00:08.00]The club isn't the best place to find a lover
[00:15.00]So the bar is where I go`
    }
  ]


};

const audio = document.getElementById("audioPlayer");
const playBtn = document.getElementById("playPauseBtn");
const prevBtn = document.getElementById("prevBtn");
const nextBtn = document.getElementById("nextBtn");
const cover = document.getElementById("coverImage");
const title = document.getElementById("songTitle");
const artist = document.getElementById("artistName");
const lyricsDisplay = document.getElementById("lyricsDisplay");
const progressBar = document.getElementById("progressBar");
const currentTime = document.getElementById("currentTime");
const duration = document.getElementById("duration");
const playlistEl = document.getElementById("playlist");
const playlistSelect = document.getElementById("playlistSelect");

let currentPlaylist = [];
let currentPlaylistName = "";
let currentIndex = 0;
let lyricsLines = [];
let isPlaying = false;

function parseLyrics(lrc) {
  return lrc.split("\n").map(line => {
    const match = line.match(/\[(\d+):(\d+\.\d+)\](.*)/);
    if (!match) return null;
    const time = parseInt(match[1]) * 60 + parseFloat(match[2]);
    return { time, text: match[3].trim() };
  }).filter(Boolean);
}

function loadPlaylists() {
  playlistSelect.innerHTML = "";
  for (let name in playlists) {
    const opt = document.createElement("option");
    opt.value = name;
    opt.textContent = name;
    playlistSelect.appendChild(opt);
  }
}

function loadPlaylist(name) {
  currentPlaylistName = name;
  currentPlaylist = playlists[name];
  currentIndex = 0;
  loadSong(currentIndex);
  updatePlaylistUI();
}

function loadSong(i) {
  const song = currentPlaylist[i];
  audio.src = song.file;
  cover.src = song.cover;
  title.textContent = song.title;
  artist.textContent = song.artist;
  lyricsLines = parseLyrics(song.lyrics);
  renderLyrics();
  progressBar.value = 0;
  currentTime.textContent = "0:00";
  duration.textContent = "0:00";
  updatePlaylistUI();
}

function renderLyrics() {
  lyricsDisplay.innerHTML = '';
  lyricsLines.forEach((line, idx) => {
    const p = document.createElement('p');
    p.textContent = line.text;
    p.dataset.index = idx;
    lyricsDisplay.appendChild(p);
  });
}

function highlightLyric(index) {
  document.querySelectorAll('#lyricsDisplay p').forEach(p => p.classList.remove('active'));
  const current = document.querySelector(`#lyricsDisplay p[data-index="${index}"]`);
  if (current) {
    current.classList.add('active');
    current.scrollIntoView({ behavior: 'smooth', block: 'center' });
  }
}

function updateLyrics(time) {
  for (let i = lyricsLines.length - 1; i >= 0; i--) {
    if (time >= lyricsLines[i].time) {
      highlightLyric(i);
      break;
    }
  }
}

function playSong() {
  audio.play();
  isPlaying = true;
  playBtn.textContent = '❚❚';
}

function pauseSong() {
  audio.pause();
  isPlaying = false;
  playBtn.textContent = '▶';
}

function formatTime(t) {
  const m = Math.floor(t / 60);
  const s = Math.floor(t % 60);
  return `${m}:${s < 10 ? '0' : ''}${s}`;
}

playBtn.onclick = () => isPlaying ? pauseSong() : playSong();

prevBtn.onclick = () => {
  currentIndex = (currentIndex - 1 + currentPlaylist.length) % currentPlaylist.length;
  loadSong(currentIndex);
  playSong();
};

nextBtn.onclick = () => {
  currentIndex = (currentIndex + 1) % currentPlaylist.length;
  loadSong(currentIndex);
  playSong();
};

audio.ontimeupdate = () => {
  if (!isNaN(audio.duration)) {
    progressBar.value = (audio.currentTime / audio.duration) * 100;
    currentTime.textContent = formatTime(audio.currentTime);
    duration.textContent = formatTime(audio.duration);
    updateLyrics(audio.currentTime);
  }
};

progressBar.oninput = () => {
  audio.currentTime = (progressBar.value / 100) * audio.duration;
};

audio.onended = () => nextBtn.click();

playlistSelect.onchange = () => {
  loadPlaylist(playlistSelect.value);
};

function updatePlaylistUI() {
  playlistEl.innerHTML = '';
  currentPlaylist.forEach((song, idx) => {
    const li = document.createElement('li');
    li.textContent = `${song.title} – ${song.artist}`;
    if (idx === currentIndex) li.classList.add('active');
    li.onclick = () => {
      currentIndex = idx;
      loadSong(idx);
      playSong();
    };
    playlistEl.appendChild(li);
  });
}

// Initialize everything
loadPlaylists();
loadPlaylist(Object.keys(playlists)[0]);
